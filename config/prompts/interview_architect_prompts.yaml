# Interview Architect Agent - AI Prompts Configuration
# These prompts are used by the Interview Architect Agent for generating interview scripts

# =============================================================================
# Hypothesis Generation (AI Fallback)
# =============================================================================
# Used when Hypothesis Generator returns no hypotheses
# Analyzes document summaries to generate process improvement hypotheses

hypothesis_generation:
  system_role: "You are an expert business process consultant with 15+ years of experience analyzing organizational workflows, identifying inefficiencies, and recommending process improvements."

  user_prompt: |
    Analyze the following document summaries and identify potential process inefficiencies, automation opportunities, or areas for improvement.

    CLIENT INFORMATION:
    - Client Name: {client_name}
    - Target Departments: {target_departments}
    - Industry: {industry}

    DOCUMENT SUMMARIES:
    {document_summaries}

    YOUR TASK:
    Generate 3-5 hypotheses about potential inefficiencies in the client's processes. Focus on:
    1. Repetitive manual tasks that could be automated
    2. Communication bottlenecks or information silos
    3. Approval delays or multi-step processes
    4. Data entry, documentation, or reporting inefficiencies
    5. Process gaps or workarounds

    For each hypothesis, provide:
    - process_area: The specific process or department affected
    - description: Clear, specific description of the suspected inefficiency
    - evidence: Specific quotes or references from the documents (use actual text when available)
    - indicators: Keywords or patterns that triggered this hypothesis
    - confidence_score: Your confidence level (0.0-1.0) that this is a real issue
    - automation_potential: Likelihood this could be automated (high/medium/low)
    - task_category: Classification (automatable/partially_automatable/human_only)

    CRITICAL: Return ONLY a valid JSON array with no additional text or explanation.

    FORMAT (JSON array only):
    [
      {
        "process_area": "string",
        "description": "string",
        "evidence": ["quote1", "quote2"],
        "indicators": ["keyword1", "keyword2"],
        "confidence_score": 0.8,
        "automation_potential": "high",
        "task_category": "automatable"
      }
    ]

  constraints:
    - Be specific and actionable
    - Base hypotheses on document content, not generic assumptions
    - Prioritize high-impact, high-confidence issues
    - Focus on "Dull, Dirty, Dangerous" tasks
    - Avoid vague or overly broad hypotheses

# =============================================================================
# Hypothesis Analysis
# =============================================================================
# Analyzes existing hypotheses to identify themes, priorities, and focus areas

hypothesis_analysis:
  system_role: "You are a strategic business analyst specializing in process improvement and organizational efficiency."

  user_prompt: |
    Analyze the following hypotheses about process inefficiencies and provide a strategic analysis.

    TARGET DEPARTMENTS: {target_departments}

    HYPOTHESES:
    {hypotheses_list}

    YOUR TASK:
    Provide a strategic analysis covering:
    1. Key Themes: What are the 2-3 main categories of issues?
    2. Priority Areas: Which process areas need the most attention?
    3. Impact Assessment: Which issues have the highest business impact?
    4. Quick Wins: Which issues could be addressed quickly?
    5. Strategic Focus: What should the interview prioritize?

    Return your analysis as a JSON object with these exact keys:
    {
      "key_themes": ["theme1", "theme2", "theme3"],
      "priority_areas": ["area1", "area2"],
      "high_impact_processes": ["process1", "process2"],
      "quick_wins": ["win1", "win2"],
      "interview_focus": "string describing main focus",
      "severity_assessment": "high/medium/low",
      "automation_opportunity": "high/medium/low"
    }

# =============================================================================
# Customer Context Generation
# =============================================================================
# Creates comprehensive customer profile for interview script

customer_context_generation:
  system_role: "You are a business analyst creating a professional client profile for stakeholder interviews."

  user_prompt: |
    Create a comprehensive customer context profile based on the available information.

    CLIENT: {client_name}
    DEPARTMENTS: {target_departments}

    DOCUMENT SUMMARIES:
    {document_summaries}

    IDENTIFIED ISSUES (Hypotheses):
    {hypotheses_summary}

    YOUR TASK:
    Generate a professional customer context that includes:
    1. business_overview: 2-3 sentence summary of the client's business and operations
    2. organization_structure: Description of how the organization is structured
    3. key_processes: List of main business processes
    4. current_challenges: Key challenges identified from the documents
    5. strategic_goals: Inferred business goals or objectives
    6. departments_involved: List of departments relevant to the analysis

    Return as JSON object with these exact keys:
    {
      "business_overview": "string",
      "organization_structure": "string",
      "key_processes": ["process1", "process2"],
      "current_challenges": ["challenge1", "challenge2"],
      "strategic_goals": ["goal1", "goal2"],
      "departments_involved": ["dept1", "dept2"]
    }

# =============================================================================
# Diagnostic Leads Generation
# =============================================================================
# Converts hypotheses into actionable diagnostic leads for validation

diagnostic_leads_generation:
  system_role: "You are creating a diagnostic checklist for process improvement consultants."

  user_prompt: |
    Convert the following hypotheses into clear, actionable diagnostic leads that interviewers should validate.

    HYPOTHESES:
    {hypotheses_list}

    ANALYSIS INSIGHTS:
    {analysis_summary}

    YOUR TASK:
    For each hypothesis, create a diagnostic lead that:
    - States the suspected issue clearly
    - Identifies affected areas/roles
    - Suggests what to validate in the interview
    - Rates priority (critical/high/medium/low)

    Return as JSON array:
    [
      {
        "hypothesis_id": "string",
        "lead_statement": "Clear statement of suspected issue",
        "affected_areas": ["area1", "area2"],
        "validation_focus": "What to validate in interview",
        "priority": "high",
        "expected_evidence": ["evidence1", "evidence2"]
      }
    ]

# =============================================================================
# Target Roles Identification
# =============================================================================
# Determines which roles should be interviewed

target_roles_identification:
  system_role: "You are an organizational analyst identifying key stakeholders for process improvement interviews."

  user_prompt: |
    Based on the identified process issues, determine which roles should be interviewed.

    DEPARTMENTS: {target_departments}

    PROCESS AREAS WITH ISSUES:
    {process_areas_list}

    ANALYSIS INSIGHTS:
    {analysis_summary}

    YOUR TASK:
    Identify 3-6 specific roles that should be interviewed. For each role:
    - Choose roles with direct involvement in the problematic processes
    - Include both operational (front-line) and management perspectives
    - Prioritize roles that can provide actionable insights
    - Consider information flow and decision-making authority

    Return as JSON object:
    {
      "primary_roles": ["role1", "role2"],
      "secondary_roles": ["role3", "role4"],
      "rationale": {
        "role1": "why this role is important",
        "role2": "why this role is important"
      }
    }

    Use specific role titles like:
    - Operations Manager, Team Lead, Process Owner
    - Customer Service Representative, Sales Associate
    - Data Analyst, IT Specialist
    - Department Head, Director

# =============================================================================
# Validation Questions Generation
# =============================================================================
# Creates targeted questions to validate hypotheses

validation_questions_generation:
  system_role: "You are an expert interviewer creating targeted questions to validate process improvement hypotheses."

  user_prompt: |
    Create specific interview questions to validate the identified hypotheses.

    TARGET ROLES: {target_roles}

    HYPOTHESES TO VALIDATE:
    {hypotheses_list}

    ANALYSIS INSIGHTS:
    {analysis_summary}

    YOUR TASK:
    For each hypothesis, create 2-3 targeted questions that:
    - Are open-ended (avoid yes/no questions)
    - Probe for specific examples and evidence
    - Uncover impact and frequency
    - Identify root causes
    - Are tailored to the role being interviewed

    Return as JSON array:
    [
      {
        "role": "specific role title",
        "question": "main question",
        "intent": "what we're trying to learn",
        "follow_ups": ["follow-up 1", "follow-up 2"],
        "related_hypothesis_id": "hypothesis id",
        "question_type": "validation"
      }
    ]

    QUESTION QUALITY CRITERIA:
    - Use "How", "What", "When", "Describe" starters
    - Avoid leading questions
    - Focus on current state, not ideal state
    - Probe for concrete examples and metrics

# =============================================================================
# Discovery Questions Generation
# =============================================================================
# Creates open-ended questions to discover new opportunities

discovery_questions_generation:
  system_role: "You are a strategic business consultant creating discovery questions to uncover hidden inefficiencies and improvement opportunities."

  user_prompt: |
    Create discovery questions to identify process issues not captured in the hypotheses.

    TARGET ROLES: {target_roles}

    KNOWN HYPOTHESES (to avoid duplication):
    {hypotheses_summary}

    ANALYSIS FOCUS:
    {analysis_summary}

    YOUR TASK:
    Create 4-6 open-ended discovery questions that:
    - Uncover unofficial processes or workarounds
    - Identify time sinks and frustrations
    - Explore cross-functional pain points
    - Discover automation opportunities
    - Reveal shadow systems or manual tracking

    Return as JSON array:
    [
      {
        "role": "applicable role",
        "question": "open-ended discovery question",
        "intent": "what we hope to discover",
        "follow_ups": ["follow-up 1", "follow-up 2"],
        "question_type": "discovery"
      }
    ]

    FOCUS AREAS:
    - Tasks that consume more time than expected
    - Informal workarounds or shortcuts
    - Information that's hard to access
    - Repetitive data entry or manual processes
    - Communication or coordination challenges

# =============================================================================
# Interview Introduction Generation
# =============================================================================
# Creates personalized interview introduction

interview_introduction:
  system_role: "You are a professional consultant crafting an interview introduction."

  user_prompt: |
    Create a professional introduction for stakeholder interviews.

    CLIENT: {client_name}
    DEPARTMENTS: {target_departments}

    FOCUS AREAS:
    {analysis_summary}

    YOUR TASK:
    Write a 2-3 paragraph introduction that:
    1. Sets a collaborative, non-threatening tone
    2. Explains the purpose of the interview
    3. Emphasizes confidentiality and openness
    4. Highlights that we're seeking their expertise
    5. Mentions approximate duration

    Return as plain text (not JSON).

    TONE: Professional, friendly, collaborative
    EMPHASIS: Their experience and insights are valuable

# =============================================================================
# Interview Closing Generation
# =============================================================================
# Creates appropriate closing notes

interview_closing:
  system_role: "You are a professional consultant crafting interview closing notes."

  user_prompt: |
    Create professional closing notes for stakeholder interviews.

    QUESTIONS COVERED: {question_count}

    KEY TOPICS:
    {topics_summary}

    YOUR TASK:
    Write a 2-paragraph closing that:
    1. Thanks the interviewee for their time and insights
    2. Explains next steps
    3. Offers opportunity for additional thoughts
    4. Provides contact information for follow-up
    5. Reinforces confidentiality

    Return as plain text (not JSON).

    TONE: Appreciative, professional, reassuring

# =============================================================================
# Duration Estimation
# =============================================================================
# Estimates interview duration

duration_estimation:
  system_role: "You are an interview planning expert estimating time requirements."

  user_prompt: |
    Estimate the interview duration based on the question complexity.

    TOTAL QUESTIONS: {question_count}
    VALIDATION QUESTIONS: {validation_count}
    DISCOVERY QUESTIONS: {discovery_count}

    COMPLEXITY FACTORS:
    {analysis_summary}

    YOUR TASK:
    Estimate interview duration in minutes considering:
    - Time per question (avg 3-5 minutes)
    - Follow-up discussions (add 50%)
    - Introduction and closing (10 minutes)
    - Complex topics may need more time

    Return as JSON:
    {
      "estimated_minutes": 60,
      "breakdown": {
        "introduction": 5,
        "questions": 45,
        "closing": 5,
        "buffer": 5
      },
      "complexity": "medium"
    }

# =============================================================================
# Configuration
# =============================================================================

settings:
  temperature: 0.7  # Balanced creativity and consistency
  max_tokens: 4096  # Allow comprehensive responses
  response_format: "json"  # Most prompts expect JSON output

fallback_behavior:
  on_parse_error: "use_generic_template"
  on_api_error: "retry_once_then_generic"
  max_retries: 1

quality_checks:
  min_hypotheses: 2
  max_hypotheses: 8
  min_questions_per_hypothesis: 2
  max_questions_per_hypothesis: 4
